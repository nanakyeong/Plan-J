<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>Kakao Map</title>
  <style>
    html, body {
        margin: 0;
        padding: 0;
        overflow: hidden;
        width: 100%;
        height: 100%;
    }
    #map {
        width: 100%;
        height: 100%;
    }
  </style>
  <script type="text/javascript" src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=717bb0e96399df26123f9decca5a9795&libraries=services"></script>
</head>
<body>
<div id="map"></div>
<script>
  var mapContainer = document.getElementById('map');
  var mapOption = {
      center: new kakao.maps.LatLng(33.3059197039, 126.2507039833),
      level: 9
  };
  var map = new kakao.maps.Map(mapContainer, mapOption);

  function displayRoute(routeData) {
      try {
          var data = JSON.parse(routeData);
          var linePath = [];
          var markers = [];

          var origin = data.origin;
          var destination = data.destination;
          var waypoints = data.waypoints;

          linePath.push(new kakao.maps.LatLng(origin.y, origin.x));
          waypoints.forEach(waypoint => {
              linePath.push(new kakao.maps.LatLng(waypoint.y, waypoint.x));
          });
          linePath.push(new kakao.maps.LatLng(destination.y, destination.x));

          // 마커 설정
          new kakao.maps.Marker({ position: new kakao.maps.LatLng(origin.y, origin.x), map: map });
          waypoints.forEach(waypoint => {
              new kakao.maps.Marker({ position: new kakao.maps.LatLng(waypoint.y, waypoint.x), map: map });
          });
          new kakao.maps.Marker({ position: new kakao.maps.LatLng(destination.y, destination.x), map: map });

          // 경로 그리기
          var polyline = new kakao.maps.Polyline({
              path: linePath,
              strokeWeight: 5,
              strokeColor: '#FF0000',
              strokeOpacity: 0.8
          });
          polyline.setMap(map);
      } catch (error) {
          console.error("Error displaying route:", error);
      }
  }
</script>
</body>
</html>
